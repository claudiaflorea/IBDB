package ibdb.utils;

import java.sql.Date;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationListener;
import org.springframework.context.event.ContextRefreshedEvent;
import org.springframework.stereotype.Component;

import ibdb.entities.address.*;
import ibdb.entities.authors.*;
import ibdb.entities.books.*;
import ibdb.entities.categories.*;
import ibdb.entities.permissions.*;
import ibdb.entities.publishers.*;
import ibdb.entities.reviews.*;
import ibdb.entities.roles.*;
import ibdb.entities.subcategories.*;
import ibdb.entities.users.*;
import ibdb.entities.feedback.*;


@Component
public class DataLoader implements ApplicationListener<ContextRefreshedEvent> {


	@Autowired
	private DisplayData displayData;

	@Autowired
	private ICategoryService categoryService;
	@Autowired
	private ISubcategoryService subcategoryService;
	@Autowired
	private IAddressService addressService;
	@Autowired
	private IUserAccountService userAccountService;
	@Autowired
	private IRoleService roleService;
	@Autowired
	private IPermissionService permissionService;
	@Autowired
	private IPublisherService publisherService;
	@Autowired
	private IAuthorService authorService;
	@Autowired
	private IBookService bookService;
	@Autowired
	private IReviewService reviewService;
	@Autowired
	private IFeedbackService feedbackService;
	

	public void onApplicationEvent(ContextRefreshedEvent event) {
		loadData();
	}
	
	@SuppressWarnings("unchecked")
	private void loadData() {
		displayData.printInfo("Starting data loading...");
	
		updateCategory();

		updateSubcategory();

		updateAddress();

		updateAuthor();

		updateRole();

		updatePermission();

		updateUserAccount();

		updateBook();

		updateFeedback();

		updateReview();

		updatePublisher();

		updateFeedback();

		displayData.printInfo("Data successfully loaded.");
		
	}
}
